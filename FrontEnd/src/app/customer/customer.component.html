<div class="fluid-container">
  <div class="d-flex align-items-center"><h1>Les clients</h1><i class="bi bi-plus-square-fill mb-3 ms-3"
                                                                style="font-size: 2rem; color: #3b7ddd; opacity: 100%;"
                                                                data-bs-toggle="modal" data-bs-target="#ajouterModal"
                                                                (click)="clearCustomer()"></i></div>
  <div class="content">
    <table class="my-table" mat-table [dataSource]="dataSource">
      <!-- Position Column -->
      <ng-container matColumnDef="nom">
        <th mat-header-cell *matHeaderCellDef> nom</th>
        <td mat-cell *matCellDef="let element"> {{ element.generaleInfo.firstName }}</td>
      </ng-container>

      <ng-container matColumnDef="prenom">
        <th mat-header-cell *matHeaderCellDef> prenom</th>
        <td mat-cell *matCellDef="let element"> {{ element.generaleInfo.lastName }}</td>
      </ng-container>

      <ng-container matColumnDef="age">
        <th mat-header-cell *matHeaderCellDef> age</th>
        <td mat-cell *matCellDef="let element"> {{ element.generaleInfo.age }}</td>
      </ng-container>

      <ng-container matColumnDef="telephone">
        <th mat-header-cell *matHeaderCellDef> telephone</th>
        <td mat-cell *matCellDef="let element"> {{ element.phone }}</td>
      </ng-container>

      <ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef> email</th>
        <td mat-cell *matCellDef="let element"> {{ element.email }}</td>
      </ng-container>

      <ng-container matColumnDef="adresse">
        <th mat-header-cell *matHeaderCellDef> adresse</th>
        <td mat-cell *matCellDef="let element"> {{ element.generaleInfo.address }}</td>
      </ng-container>

      <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef> action</th>
        <td mat-cell *matCellDef="let element"><i class="bi bi-eye me-3 voir" data-bs-toggle="modal"
                                                  data-bs-target="#clientModal" (click)="selectCustomer(element)"></i><i
          class="bi bi-pencil-square me-3 modifier" (click)="selectCustomer(element)" data-bs-toggle="modal"
          data-bs-target="#modifModal"></i><i class="bi bi-trash supprimer" (click)="selectCustomer(element)"
                                              data-bs-toggle="modal" data-bs-target="#suppModal"></i></td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
    <mat-paginator [pageSizeOptions]="[5, 10, 20]"
                   aria-label="Select page of periodic elements">
    </mat-paginator>
  </div>
</div>

<div class="modal fade" id="clientModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h2>{{ customer.generaleInfo.firstName }} {{ customer.generaleInfo.lastName }}</h2>
      </div>
      <div class="modal-body table-striped">
        <div class="row mt-3">
          <div class="col">
            age : {{ customer.generaleInfo.age }}
          </div>
        </div>
        <div class="row mt-3">
          <div class="col">
            email : {{ customer.email }}
          </div>
        </div>
        <div class="row mt-3">
          <div class="col">
            telephone : +216 {{ customer.phone }}
          </div>
        </div>
        <div class="row mt-3">
          <div class="col">
            adresse : {{ customer.generaleInfo.address }}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="ajouterModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-body">
        <div class="row">
          <div class="col">
            <label for="nom" class="form-label">nom :</label>
            <input id="nom" name="nom" type="text" class="form-control" [(ngModel)]="customer.generaleInfo.firstName">
          </div>
          <div class="col">
            <label for="prenom" class="form-label">prenom :</label><input id="prenom" type="text" class="form-control"
                                                                          [(ngModel)]="customer.generaleInfo.lastName">
          </div>
        </div>
        <div class="row mt-3">
          <div class="col">
            <label for="age" class="form-label">age :</label><input id="age" type="number" class="form-control"
                                                                    [(ngModel)]="customer.generaleInfo.age">
          </div>
        </div>
        <div class="row mt-3">
          <div class="col">
            <label for="email" class="form-label">email :</label><input id="email" type="email" class="form-control"
                                                                        placeholder="@gmail.com"
                                                                        [(ngModel)]="customer.email">
          </div>
          <div class="col">
            <label for="telephone" class="form-label">telephone :</label><input id="telephone" type="text"
                                                                                class="form-control" placeholder="+216"
                                                                                [(ngModel)]="customer.phone">
          </div>
        </div>
        <div class="row mt-3">
          <div class="col">
            <label for="adresse" class="form-label">adresse :</label><input id="adresse" type="email"
                                                                            class="form-control"
                                                                            [(ngModel)]="customer.generaleInfo.address">
          </div>
        </div>
      </div>
      <div class="d-flex justify-content-end p-2">
        <button type="button" class="btn btn-light me-2" data-bs-dismiss="modal">annuler</button>
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal" (click)="addCustomer()">enregistrer
        </button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="modifModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-body">
        <div class="row">
          <div class="col">
            <label for="nom_modif" class="form-label">nom :</label><input id="nom_modif" type="text"
                                                                          class="form-control"
                                                                          [(ngModel)]="customer.generaleInfo.firstName">
          </div>
          <div class="col">
            <label for="prenom_modif" class="form-label">prenom :</label><input id="prenom_modif" type="text"
                                                                                class="form-control"
                                                                                [(ngModel)]="customer.generaleInfo.lastName">
          </div>
        </div>
        <div class="row mt-3">
          <div class="col">
            <label for="age_modif" class="form-label">age :</label><input id="age_modif" type="number"
                                                                          class="form-control"
                                                                          [(ngModel)]="customer.generaleInfo.age">
          </div>
        </div>
        <div class="row mt-3">
          <div class="col">
            <label for="email_modif" class="form-label">email :</label><input id="email_modif" type="email"
                                                                              class="form-control"
                                                                              placeholder="@gmail.com"
                                                                              [(ngModel)]="customer.email">
          </div>
          <div class="col">
            <label for="telephone_modif" class="form-label">telephone :</label><input id="telephone_modif" type="text"
                                                                                      class="form-control"
                                                                                      placeholder="+216"
                                                                                      [(ngModel)]="customer.phone">
          </div>
        </div>
        <div class="row mt-3">
          <div class="col">
            <label for="adresse_modif" class="form-label">adresse :</label><input id="adresse_modif" type="email"
                                                                                  class="form-control"
                                                                                  [(ngModel)]="customer.generaleInfo.address">
          </div>
        </div>
      </div>
      <div class="d-flex justify-content-end p-2">
        <button type="button" class="btn btn-light me-2" data-bs-dismiss="modal">annuler</button>
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal" (click)="updateCustomer()">enregistrer
        </button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="suppModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-body">
        Allez-vous supprimer cette client?
        <div class="d-flex justify-content-end p-2">
          <button type="button" class="btn btn-light me-2" data-bs-dismiss="modal">annuler</button>
          <button type="button" class="btn btn-danger" data-bs-dismiss="modal" (click)="deleteCustomer()">supprimer
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
