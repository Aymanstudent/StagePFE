<div class="fluid-container">
  <div class="d-flex align-items-center"><h1>Les clients</h1><i class="bi bi-plus-square-fill mb-3 ms-3" style="font-size: 2rem; color: #3b7ddd; opacity: 100%;" data-bs-toggle="modal" data-bs-target="#ajouterModal" (click)="effacer()" ></i></div>
  <div class="content">
    <table class="my-table" mat-table [dataSource]="dataSource">
      <!-- Position Column -->
      <ng-container matColumnDef="nom">
        <th mat-header-cell *matHeaderCellDef> nom </th>
        <td mat-cell *matCellDef="let element"> {{element.personne.nom}} </td>
      </ng-container>

      <!-- Name Column -->
      <ng-container matColumnDef="prenom">
        <th mat-header-cell *matHeaderCellDef> prenom </th>
        <td mat-cell *matCellDef="let element"> {{element.personne.prenom}} </td>
      </ng-container>

      <!-- Weight Column -->
      <ng-container matColumnDef="age">
        <th mat-header-cell *matHeaderCellDef> age </th>
        <td mat-cell *matCellDef="let element"> {{element.personne.age}} </td>
      </ng-container>

      <!-- Symbol Column -->
      <ng-container matColumnDef="sexe">
        <th mat-header-cell *matHeaderCellDef> sexe </th>
        <td mat-cell *matCellDef="let element"> {{element.personne.sexe}} </td>
      </ng-container>

      <ng-container matColumnDef="telephone">
        <th mat-header-cell *matHeaderCellDef> telephone </th>
        <td mat-cell *matCellDef="let element"> {{element.personne.telephone}} </td>
      </ng-container>

      <ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef> email </th>
        <td mat-cell *matCellDef="let element"> {{element.personne.email}} </td>
      </ng-container>

      <ng-container matColumnDef="adresse">
        <th mat-header-cell *matHeaderCellDef> adresse </th>
        <td mat-cell *matCellDef="let element"> {{element.personne.adresse}} </td>
      </ng-container>

      <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef> action </th>
        <td mat-cell *matCellDef="let element"><i class="bi bi-eye me-3 voir" data-bs-toggle="modal" data-bs-target="#clientModal" (click)="afficher_client(element)"></i><i class="bi bi-pencil-square me-3 modifier" (click)="afficher_client(element)" data-bs-toggle="modal" data-bs-target="#modifModal"></i><i class="bi bi-trash supprimer" (click)="afficher_client(element)" data-bs-toggle="modal" data-bs-target="#suppModal"></i></td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
    <mat-paginator [pageSizeOptions]="[5, 10, 20]"
                   aria-label="Select page of periodic elements">
    </mat-paginator>
  </div>
</div>

<div class="modal fade" id="clientModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
          <h2>{{client.personne.nom}} {{client.personne.prenom}}</h2>
      </div>
      <div class="modal-body table-striped">
        <div class="row mt-3">
          <div class="col">
            age : {{client.personne.age}}
          </div>
          <div class="col">
            sexe : {{client.personne.sexe}}
          </div>
        </div>
        <div class="row mt-3">
          <div class="col">
            email : {{client.personne.email}}
          </div>
        </div>
        <div class="row mt-3">
          <div class="col">
            telephone : +216 {{client.personne.telephone}}
          </div>
        </div>
        <div class="row mt-3">
          <div class="col">
            adresse : {{client.personne.adresse}}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="ajouterModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-body">
        <div class="row">
          <div class="col">
            <label for="nom" class="form-label">nom :</label>
            <input id="nom" name="nom" type="text" class="form-control" [(ngModel)]="client.personne.nom">
          </div>
          <div class="col">
            <label for="prenom" class="form-label">prenom :</label><input id="prenom" type="text" class="form-control" [(ngModel)]="client.personne.prenom">
          </div>
        </div>
        <div class="row mt-3">
          <div class="col">
            <label for="age" class="form-label">age :</label><input id="age" type="number" class="form-control" [(ngModel)]="client.personne.age">
          </div>
          <div class="col">
            <label for="sexe" class="form-label">sexe :</label><select class="form-select" id="sexe" [(ngModel)]="client.personne.sexe"><option class="form-option">homme</option><option class="form-option">femme</option></select>
          </div>
        </div>
        <div class="row mt-3">
          <div class="col">
            <label for="email" class="form-label">email :</label><input id="email" type="email" class="form-control" placeholder="@gmail.com" [(ngModel)]="client.personne.email">
          </div>
          <div class="col">
            <label for="telephone" class="form-label">telephone :</label><input id="telephone" type="text" class="form-control" placeholder="+216" [(ngModel)]="client.personne.telephone">
          </div>
        </div>
        <div class="row mt-3">
          <div class="col">
            <label for="adresse" class="form-label">adresse :</label><input id="adresse" type="email" class="form-control" [(ngModel)]="client.personne.adresse">
          </div>
        </div>
      </div>
      <div class="d-flex justify-content-end p-2">
        <button type="button" class="btn btn-light me-2" data-bs-dismiss="modal">annuler</button>
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal" (click)="ajouter_client()">enregistrer</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="modifModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-body">
        <div class="row">
          <div class="col">
            <label for="nom_modif" class="form-label">nom :</label><input id="nom_modif" type="text" class="form-control" [(ngModel)]="client.personne.nom">
          </div>
          <div class="col">
            <label for="prenom_modif" class="form-label">prenom :</label><input id="prenom_modif" type="text" class="form-control" [(ngModel)]="client.personne.prenom">
          </div>
        </div>
        <div class="row mt-3">
          <div class="col">
            <label for="age_modif" class="form-label">age :</label><input id="age_modif" type="number" class="form-control" [(ngModel)]="client.personne.age">
          </div>
          <div class="col">
            <label for="sexe_modif" class="form-label">sexe :</label><select class="form-select" id="sexe_modif" [(ngModel)]="client.personne.sexe"><option class="form-option">homme</option><option class="form-option">femme</option></select>
          </div>
        </div>
        <div class="row mt-3">
          <div class="col">
            <label for="email_modif" class="form-label">email :</label><input id="email_modif" type="email" class="form-control" placeholder="@gmail.com" [(ngModel)]="client.personne.email">
          </div>
          <div class="col">
            <label for="telephone_modif" class="form-label">telephone :</label><input id="telephone_modif" type="text" class="form-control" placeholder="+216" [(ngModel)]="client.personne.telephone">
          </div>
        </div>
        <div class="row mt-3">
          <div class="col">
            <label for="adresse_modif" class="form-label">adresse :</label><input id="adresse_modif" type="email" class="form-control" [(ngModel)]="client.personne.adresse">
          </div>
        </div>
      </div>
      <div class="d-flex justify-content-end p-2">
        <button type="button" class="btn btn-light me-2" data-bs-dismiss="modal">annuler</button>
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal" (click)="modifier_client()">enregistrer</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="suppModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-body">
        Allez-vous supprimer cette client?
      <div class="d-flex justify-content-end p-2">
        <button type="button" class="btn btn-light me-2" data-bs-dismiss="modal">annuler</button>
        <button type="button" class="btn btn-danger" data-bs-dismiss="modal" (click)="supprimer_client()">supprimer</button>
      </div>
    </div>
  </div>
</div>
</div>
